var hanUtils={getLocalStorage:function(key){var exp=60*60*1e3;if(localStorage.getItem(key)){var vals=localStorage.getItem(key);var dataObj=JSON.parse(vals);var isTimed=(new Date).getTime()-dataObj.timer>exp;if(isTimed){console.log("存储已过期");localStorage.removeItem(key);return null}else{var newValue=dataObj.val}return newValue}else{return null}},isQuotaExceeded:function(e){var quotaExceeded=false;if(e){if(e.code){switch(e.code){case 22:quotaExceeded=true;break;case 1014:if(e.name==="NS_ERROR_DOM_QUOTA_REACHED"){quotaExceeded=true}break}}else if(e.number===-2147024882){quotaExceeded=true}}return quotaExceeded},setLocalStorage:function(key,value){var curtime=(new Date).getTime();var valueDate=JSON.stringify({val:value,timer:curtime});try{localStorage.setItem(key,valueDate)}catch(e){if(isQuotaExceeded(e)){console.log("Error: 本地存储超过限制");localStorage.clear()}else{console.log("Error: 保存到本地存储失败")}}}};